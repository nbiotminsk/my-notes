# Как откатить изменения в Git, если код перестал работать

Отличный вопрос. Это одна из самых важных функций системы контроля версий Git. Способ отката зависит от того, успели ли вы **закоммитить** (сохранить в Git) эти изменения.

Давайте разберем оба случая.

### Случай 1: Изменения еще не были закоммичены

Это самый простой сценарий. Вы внесли правки в файлы, но не делали `git commit`.

1.  **Проверьте статус**, чтобы увидеть, какие файлы были изменены:
    ```bash
    git status
    ```

2.  **Откатите изменения:**
    *   **Если вы хотите отменить изменения только в одном файле:**
        ```bash
        # Замените <имя_файла> на реальное имя файла
        git checkout -- <имя_файла>
        ```

    *   **Если вы хотите отменить ВСЕ изменения во всех файлах** и вернуть их к состоянию последнего коммита (используйте с осторожностью!):
        ```bash
        git checkout .
        ```

Эти команды отменят ваши локальные правки, и файлы вернутся к тому виду, в котором они были в последнем "чекпоинте" (коммите).

### Случай 2: Изменения были закоммичены

Если вы уже сделали `git commit` с неработающим кодом, у вас есть два основных способа отката.

#### Способ А: `git revert` (Безопасный и рекомендуемый)

Этот способ **создает новый коммит**, который является полной противоположностью "сломанного" коммита. Он не удаляет старый коммит, а как бы "перекрывает" его новым, который все исправляет. Это самый безопасный способ, особенно если вы работаете в команде.

1.  **Найдите хэш "сломанного" коммита.** Посмотрите историю коммитов:
    ```bash
    git log --oneline
    ```
    Вы увидите что-то вроде:
    ```
    e5a4d83 (HEAD -> main) feat: сломал все
    a3b8d1e fix: все работало здесь
    ```
    Вам нужен хэш `e5a4d83`.

2.  **Создайте "отменяющий" коммит:**
    ```bash
    git revert e5a4d83
    ```
    Git откроет текстовый редактор, чтобы вы могли написать сообщение для нового, отменяющего коммита (обычно можно оставить стандартное). После сохранения Git создаст новый коммит, который вернет код в рабочее состояние.

#### Способ Б: `git reset` (Опасный, перезаписывает историю)

Этот способ **полностью удаляет** последние коммиты из истории. Его можно использовать, только если вы **еще не отправляли** эти коммиты на удаленный сервер (не делали `git push`).

1.  **Чтобы откатить последний коммит и удалить все изменения из него:**
    ```bash
    # Откатывает на 1 коммит назад. HEAD~2 - на 2 коммита и т.д.
    git reset --hard HEAD~1
    ```
    **Внимание:** Флаг `--hard` означает, что все изменения, сделанные в этом коммите, будут **безвозвратно удалены**.

### Рекомендация

*   Если вы работаете один и еще не делали `git push`, можете использовать `git reset --hard`.
*   Во всех остальных случаях, особенно при работе в команде, **всегда используйте `git revert`**. Это сохранит историю изменений и не создаст проблем для ваших коллег.

#git #version-control #tutorial
